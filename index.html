<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Studio - AI-First IDE</title>
    
    <!-- æ ·å¼ -->
    <link rel="stylesheet" href="src/ui/styles/main.css">
    
    <!-- Monaco Editor -->
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="node_modules/monaco-editor/min/vs/editor/editor.main.css">
    
    <!-- xterm.js -->
    <link rel="stylesheet" href="node_modules/xterm/css/xterm.css">
</head>
<body>
    <!-- é¡¶éƒ¨æ  -->
    <div class="top-bar">
        <div class="nav-buttons">
            <button class="nav-btn" title="åé€€">â†</button>
            <button class="nav-btn" title="å‰è¿›">â†’</button>
        </div>
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" placeholder="æœç´¢æ–‡ä»¶ (Cmd+P)" id="quick-search">
        </div>
        <div class="top-actions">
            <button class="nav-btn" id="toggle-ai-btn" title="AI åŠ©æ‰‹ (Cmd+Shift+L)" style="font-size: 18px;">ğŸ¤–</button>
            <button class="nav-btn" id="toggle-terminal" title="åˆ‡æ¢ç»ˆç«¯ (Cmd+`)">âŒ˜</button>
            <button class="nav-btn" id="toggle-sidebar" title="åˆ‡æ¢ä¾§è¾¹æ ">ğŸ“</button>
            <button class="nav-btn" id="workspace-state-btn" title="å·¥ä½œåŒºçŠ¶æ€ç®¡ç†">ğŸ’¾</button>
            <button class="nav-btn" title="è®¾ç½®">âš™ï¸</button>
        </div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- å·¦ä¾§è¾¹æ  - æ–‡ä»¶æ ‘ -->
        <div class="sidebar">
            <div class="sidebar-header">
                <span>èµ„æºç®¡ç†å™¨</span>
                <div class="sidebar-actions">
                    <button class="sidebar-btn" title="æ–°å»ºæ–‡ä»¶" id="new-file-btn">ğŸ“„</button>
                    <button class="sidebar-btn" title="æ–°å»ºæ–‡ä»¶å¤¹" id="new-folder-btn">ğŸ“</button>
                    <button class="sidebar-btn" title="æ‰“å¼€é¡¹ç›®" id="open-project-btn">ğŸ“‚</button>
                    <button class="sidebar-btn" title="åˆ·æ–°" id="refresh-files-btn">ğŸ”„</button>
                </div>
            </div>
            <div id="file-tree">
                <!-- æ–‡ä»¶æ ‘å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                <div style="padding: 20px; text-align: center; color: var(--text-dim);">
                    <p style="margin-bottom: 12px; font-size: 16px;">ğŸ“‚</p>
                    <p style="font-size: 11px;">ç‚¹å‡»"æ‰“å¼€é¡¹ç›®"å¼€å§‹</p>
                </div>
            </div>
        </div>

        <!-- åˆ†éš”æ¡ï¼šå·¦ä¾§è¾¹æ  | ç¼–è¾‘å™¨ -->
        <div class="resizer" id="sidebar-resizer"></div>

        <!-- ä¸­é—´ - ç¼–è¾‘å™¨åŒºåŸŸ -->
        <div class="editor-area">
            <!-- æ ‡ç­¾æ  -->
            <div class="tabs-bar" id="tabs-bar">
                <!-- æ ‡ç­¾é¡µå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <div class="editor-stack">
                <div class="editor-surface">
                    <!-- Monaco Editor å®¹å™¨ -->
                    <div id="editor-container"></div>
                </div>

                <div class="horizontal-resizer" id="terminal-resizer"></div>

                <!-- ç»ˆç«¯é¢æ¿ -->
                <div class="terminal-panel">
                    <div class="terminal-header">
                        <div class="terminal-title">ç»ˆç«¯</div>
                        <div class="sidebar-actions">
                            <button class="sidebar-btn" title="æ–°å»ºç»ˆç«¯">â•</button>
                            <button class="sidebar-btn" title="åˆ†å‰²ç»ˆç«¯">â«¿</button>
                            <button class="sidebar-btn" title="æ¸…å±">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div id="terminal-container"></div>
                </div>
            </div>
        </div>

        <!-- åˆ†éš”æ¡ï¼šç¼–è¾‘å™¨ | AI é¢æ¿ -->
        <div class="resizer hidden" id="ai-resizer"></div>

        <!-- å³ä¾§ - AI å¯¹è¯é¢æ¿ï¼ˆé»˜è®¤éšè—ï¼‰-->
        <div class="ai-panel hidden">
            <div class="ai-header">
                <div class="ai-title">
                    <span>ğŸ¤–</span>
                    <span>AI åŠ©æ‰‹</span>
                    <span class="claude-status status-disconnected" style="margin-left: 8px; font-size: 12px;">â— è¿æ¥ä¸­...</span>
                </div>
                <div class="ai-header-actions">
                    <button class="sidebar-btn" title="å¯¹è¯å†å²" id="history-btn">ğŸ“š</button>
                    <button class="sidebar-btn" title="ä¼šè¯ç®¡ç†" id="sessions-btn">ğŸ“‹</button>
                    <button class="sidebar-btn" title="æ¨¡å‹é€‰æ‹©" id="model-select-btn">âš™ï¸</button>
                    <button class="sidebar-btn" title="å…³é—­" id="close-ai-panel">Ã—</button>
                </div>
            </div>

            <!-- æ¶ˆæ¯åŒºåŸŸ -->
            <div id="chat-messages">
                <!-- æ¬¢è¿æ¶ˆæ¯ -->
                <div class="message">
                    <div class="message-header">
                        <span class="message-author">Claude</span>
                        <span class="message-time">ç°åœ¨</span>
                    </div>
                    <div class="message-body">
                        ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯ Claudeï¼Œä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹ã€‚
                        <br><br>
                        <strong>è¯•è¯•è¿™äº›æ“ä½œï¼š</strong><br>
                        â€¢ é€‰ä¸­ä»£ç æŒ‰ <code>Cmd+K</code> è¿›è¡Œå†…è”ç¼–è¾‘<br>
                        â€¢ æŒ‰ <code>Cmd+L</code> æ‰“å¼€å¯¹è¯é¢æ¿<br>
                        â€¢ åœ¨è¿™é‡Œæé—®å…³äºä»£ç çš„ä»»ä½•é—®é¢˜
                    </div>
                </div>
            </div>

            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="ai-input-area">
                    <textarea
                    id="chat-input" 
                    placeholder="é—®æˆ‘ä»»ä½•å…³äºä»£ç çš„é—®é¢˜... (Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ)"
                    rows="3"
                    ></textarea>
                <button class="send-btn" id="send-chat-btn">â¤</button>
            </div>
        </div>
    </div>

    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
        <div class="status-item">
            <span>â—</span>
            <span id="status-branch">main</span>
        </div>
        <div class="status-item">
            <span>ğŸ“</span>
            <span id="status-project">æœªæ‰“å¼€é¡¹ç›®</span>
        </div>
        <div class="status-item" style="margin-left: auto;">
            <span id="status-position">Ln 1, Col 1</span>
        </div>
        <div class="status-item">
            <span id="status-language">Plain Text</span>
        </div>
        <div class="status-item">
            <span id="status-encoding">UTF-8</span>
        </div>
    </div>

    <!-- xterm CSS -->
    <link rel="stylesheet" href="node_modules/xterm/css/xterm.css">
    
    <!-- Monaco Editor åŠ è½½å™¨ -->
    <script>
        var require = { paths: { vs: 'node_modules/monaco-editor/min/vs' } };
    </script>
    <script src="node_modules/monaco-editor/min/vs/loader.js"></script>
    
    <!-- åŠ è½½ xterm.jsï¼ˆè§£å†³ AMD å†²çªï¼‰ -->
    <script>
        (function() {
            var savedRequire = window.require;
            var savedDefine = window.define;
            
            // æ‹¦æˆª AMD define è°ƒç”¨å¹¶è½¬æ¢ä¸ºå…¨å±€å˜é‡
            window.define = function() {
                var factory = arguments[arguments.length - 1];
                if (typeof factory === 'function') {
                    try {
                        var module = factory();
                        if (module && module.Terminal) {
                            window.Terminal = module.Terminal;
                        } else if (module && module.FitAddon) {
                            window.FitAddon = module.FitAddon;
                        }
                    } catch (e) {
                        console.error('æ¨¡å—åŠ è½½å¤±è´¥:', e);
                    }
                }
            };
            window.define.amd = true;
            
            // åŠ è½½ xterm è„šæœ¬
            Promise.all([
                fetch('node_modules/xterm/lib/xterm.js').then(r => r.text()),
                fetch('node_modules/xterm-addon-fit/lib/xterm-addon-fit.js').then(r => r.text())
            ]).then(function(scripts) {
                try {
                    eval(scripts[0]);
                    eval(scripts[1]);
                } catch (e) {
                    console.error('xterm åŠ è½½å¤±è´¥:', e);
                }
                
                // æ¢å¤ AMD ç¯å¢ƒ
                window.require = savedRequire;
                window.define = savedDefine;
                
                // åŠ è½½ app.js
                var script = document.createElement('script');
                script.src = 'src/renderer/app.js';
                document.body.appendChild(script);
            }).catch(function(err) {
                console.error('åŠ è½½å¤±è´¥:', err);
            });
        })();
    </script>
</body>
</html>
